{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gal\\\\Desktop\\\\Udemy\\\\event_finder_app\\\\src\\\\components\\\\CalendarTest.js\";\nimport React from 'react';\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport moment from 'moment';\nimport 'react-big-calendar/lib/sass/styles.scss';\nimport './Calendar.css';\nconst localizer = momentLocalizer(moment);\nconsole.log('got to calendar component');\n\nclass CalendarTest extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getEvents = () => {\n      const fetchUrl = 'http://localhost:5000/calendar/' + this.props.countryCode + '/' + this.props.city;\n      fetch(fetchUrl).then(res => res.json()).then(data => {\n        const eventsArr = data[Object.keys(data)[0]].events;\n        console.log('arr:', eventsArr.events);\n        const tempEventsArr = eventsArr.map(event => {\n          console.log('event is:', event);\n          const startDate = new Date(event.dates.start.dateTime);\n          const endDate = new Date(startDate + 1);\n          const obj = {\n            id: event.id,\n            title: event.name,\n            start: startDate,\n            end: endDate,\n            img: event.images[5].url,\n            ticketsUrl: event.url\n          };\n          console.log('obj is:', obj);\n          return obj;\n        });\n        this.setState({\n          events: tempEventsArr\n        }, this.addClickFunctions);\n      });\n    };\n\n    this.SaveSearch = () => {\n      fetch('http://localhost:5000/saveSearch', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: this.props.userId,\n          city: this.props.city,\n          countryCode: this.props.countryCode\n        })\n      }).then(response => response.json()).then(user => {\n        console.log('user back in cal:', user);\n        console.log('userid back in cal:', user[0]);\n\n        if (user[0] === parseInt(this.props.userId)) {\n          const btnDiv = document.getElementById('buttonDiv');\n          const msg = document.createElement(\"p\");\n          msg.textContent = \"search saved to your profile!\";\n          btnDiv.appendChild(msg);\n        }\n      });\n    };\n\n    this.addClickFunctions = () => {\n      const eventsClasses = document.querySelectorAll(\".rbc-event\");\n\n      if (eventsClasses) {\n        eventsClasses.forEach(div => {\n          const selectedEvent = this.getEventObj(div.firstElementChild);\n          const eventDataSpan = document.createElement('span');\n          eventDataSpan.className = 'singleEvent dib hidden tc grow card-bg br3 pa4 ma3 mb5 bw2 shadow-5';\n          const eventTitle = document.createElement('h2');\n          const eventImg = document.createElement('img');\n          const eventLink = document.createElement('a');\n          eventTitle.textContent = div.firstElementChild.title;\n          eventImg.src = selectedEvent[0].img;\n          eventLink.href = selectedEvent[0].ticketsUrl;\n          eventLink.textContent = \"Order tickets now!\";\n          eventDataSpan.appendChild(eventTitle);\n          eventDataSpan.appendChild(eventImg);\n          eventDataSpan.appendChild(eventLink);\n          const eventDetailsDiv = document.getElementById('eventDetails');\n          eventDetailsDiv.appendChild(eventDataSpan);\n          div.addEventListener(\"mouseenter\", () => {\n            eventDataSpan.id = selectedEvent[0].id;\n            const span = document.getElementById(selectedEvent[0].id);\n            span.classList.remove(\"hidden\");\n          });\n          div.addEventListener(\"mouseleave\", () => {\n            if (document.getElementById(selectedEvent[0].id)) {\n              const span = document.getElementById(selectedEvent[0].id);\n              span.classList.add(\"hidden\");\n            }\n          });\n          div.addEventListener(\"click\", () => {\n            const span = document.getElementById(selectedEvent[0].id);\n            span.id = 'block';\n            span.classList.remove(\"hidden\");\n          });\n        });\n      }\n    };\n\n    this.onEventClick = div => {};\n\n    this.getEventObj = div => {\n      console.log(div);\n      const selectedEvent = this.state.events.filter(obj => obj.title === div.title);\n      console.log('selected event:', selectedEvent);\n      return selectedEvent; // const eventSpan = document.createElement('span');\n      // eve document.getElementById('singleEvent');\n      // const h2 = eventSpan.children[0];\n      // h2.textContent = div.title;\n      // const img = eventSpan.children[1];\n      // img.src = selectedEvent[0].img;\n      // const a = eventSpan.children[2];\n      // a.href = selectedEvent[0].ticketsUrl\n      // a.href.textContent = \"Order tickets now!\";\n      // div.appendChild(eventSpan);\n    };\n\n    this.state = {\n      events: [],\n      eventImg: '',\n      eventLink: ''\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.city) {\n      this.getEvents();\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          events = _this$state.events,\n          eventImg = _this$state.eventImg,\n          eventLink = _this$state.eventLink;\n\n    if (this.props.isSignedIn) {\n      return React.createElement(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Calendar, {\n        localizer: localizer,\n        events: events,\n        startAccessor: \"start\",\n        endAccessor: \"end\",\n        style: {\n          height: 500\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"eventDetails\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"eventDetailsBlock\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"buttonDiv\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"h3 ma4\",\n        onClick: this.SaveSearch,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Save This Search\")));\n    } else {\n      return React.createElement(\"div\", {\n        id: \"calendar\",\n        className: \"pa4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"pa3 ma2 shadow-5\",\n        style: {\n          display: 'flex',\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(Calendar, {\n        localizer: localizer,\n        events: events,\n        startAccessor: \"start\",\n        endAccessor: \"end\",\n        style: {\n          height: 500\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"eventDetails\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }))));\n    }\n  }\n\n}\n\nexport default CalendarTest;","map":{"version":3,"sources":["C:/Users/Gal/Desktop/Udemy/event_finder_app/src/components/CalendarTest.js"],"names":["React","Calendar","momentLocalizer","moment","localizer","console","log","CalendarTest","Component","constructor","props","getEvents","fetchUrl","countryCode","city","fetch","then","res","json","data","eventsArr","Object","keys","events","tempEventsArr","map","event","startDate","Date","dates","start","dateTime","endDate","obj","id","title","name","end","img","images","url","ticketsUrl","setState","addClickFunctions","SaveSearch","method","headers","body","JSON","stringify","user","userId","response","parseInt","btnDiv","document","getElementById","msg","createElement","textContent","appendChild","eventsClasses","querySelectorAll","forEach","div","selectedEvent","getEventObj","firstElementChild","eventDataSpan","className","eventTitle","eventImg","eventLink","src","href","eventDetailsDiv","addEventListener","span","classList","remove","add","onEventClick","state","filter","componentDidMount","render","isSignedIn","display","justifyContent","height"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\r\nimport moment from 'moment';\r\nimport 'react-big-calendar/lib/sass/styles.scss';\r\nimport './Calendar.css';\r\n \r\nconst localizer = momentLocalizer(moment)\r\n \r\nconsole.log('got to calendar component');\r\nclass CalendarTest extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tevents : [],\r\n\t\t\teventImg : '',\r\n\t\t\teventLink : ''\r\n\t\t}}\r\n\r\n\tgetEvents= () => {\r\n\t\tconst fetchUrl = 'http://localhost:5000/calendar/' + this.props.countryCode + '/' + this.props.city;\r\n\t\tfetch(fetchUrl)\r\n\t\t.then(res => res.json())\r\n\t\t.then(data => {\r\n\t\t\tconst eventsArr = data[Object.keys(data)[0]].events;\r\n\t\t\tconsole.log('arr:', eventsArr.events);\r\n\t\t\tconst tempEventsArr = eventsArr.map(event => {\r\n\t\t\t\tconsole.log('event is:', event);\r\n\t\t\t\tconst startDate = new Date(event.dates.start.dateTime);\r\n\t\t\t\tconst endDate = new Date(startDate + 1);\r\n\t\t\t\tconst obj = {\r\n\t\t\t\t\tid : event.id,\r\n\t\t\t\t\ttitle : event.name,\r\n\t\t\t\t\tstart : startDate,\r\n\t\t\t\t\tend : endDate,\r\n\t\t\t\t\timg : event.images[5].url,\r\n\t\t\t\t\tticketsUrl : event.url\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log('obj is:', obj);\r\n\t\t\t\treturn obj;\r\n\t\t\t})\r\n\t\t\tthis.setState({events : tempEventsArr}, this.addClickFunctions);\r\n\t\t});\r\n\t}\r\n\r\n\tSaveSearch = () => {\r\n\t\tfetch('http://localhost:5000/saveSearch', {\r\n\t      method: 'post',\r\n\t      headers: {'Content-Type': 'application/json'},\r\n\t      body: JSON.stringify({\r\n\t        user : this.props.userId,\r\n\t        city: this.props.city,\r\n\t        countryCode: this.props.countryCode\r\n\t      })\r\n\t    })\r\n\t      .then(response => response.json())\r\n\t      .then(user => {\r\n\t      \tconsole.log('user back in cal:',user);\r\n\t      \tconsole.log('userid back in cal:',user[0]);\r\n\t        if (user[0] === parseInt(this.props.userId)) {\r\n\t        \tconst btnDiv = document.getElementById('buttonDiv');\r\n\t        \tconst msg = document.createElement(\"p\");\r\n\t        \tmsg.textContent = \"search saved to your profile!\";\r\n\t        \tbtnDiv.appendChild(msg);\r\n\t        }\r\n\t      })\r\n\t}\r\n\taddClickFunctions = () => {\r\n\t\tconst eventsClasses = document.querySelectorAll(\".rbc-event\");\r\n\t\tif(eventsClasses){\r\n\t\t\teventsClasses.forEach(div => {\r\n\t\t\t\tconst selectedEvent = this.getEventObj(div.firstElementChild);\r\n\t\t\t\tconst eventDataSpan = document.createElement('span');\r\n\t\t\t\teventDataSpan.className = 'singleEvent dib hidden tc grow card-bg br3 pa4 ma3 mb5 bw2 shadow-5';\r\n\t\t\t\tconst eventTitle = document.createElement('h2');\r\n\t\t\t\tconst eventImg = document.createElement('img');\r\n\t\t\t\tconst eventLink = document.createElement('a');\r\n\t\t\t\teventTitle.textContent = div.firstElementChild.title;\r\n\t\t\t\teventImg.src=selectedEvent[0].img;\r\n\t\t\t\teventLink.href = selectedEvent[0].ticketsUrl;\r\n\t\t\t\teventLink.textContent = \"Order tickets now!\";\r\n\t\t\t\teventDataSpan.appendChild(eventTitle);\r\n\t\t\t\teventDataSpan.appendChild(eventImg);\r\n\t\t\t\teventDataSpan.appendChild(eventLink);\r\n\t\t\t\tconst eventDetailsDiv = document.getElementById('eventDetails');\r\n\t\t\t\teventDetailsDiv.appendChild(eventDataSpan);\r\n\t\t\t\r\n\t\t\t\tdiv.addEventListener(\"mouseenter\", () => {\r\n\t\t\t\t\teventDataSpan.id = selectedEvent[0].id;\r\n\t\t\t\t\tconst span = document.getElementById(selectedEvent[0].id);\r\n\t\t\t\t\tspan.classList.remove(\"hidden\")\r\n\t\t\t\t});\r\n\t\t\t\tdiv.addEventListener(\"mouseleave\", () => {\r\n\t\t\t\t\tif(document.getElementById(selectedEvent[0].id)){\r\n\t\t\t\t\t\tconst span = document.getElementById(selectedEvent[0].id);\r\n\t\t\t\t\t\tspan.classList.add(\"hidden\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tdiv.addEventListener(\"click\", () => {\r\n\t\t\t\t\tconst span = document.getElementById(selectedEvent[0].id);\r\n\t\t\t\t\tspan.id = 'block';\r\n\t\t\t\t\tspan.classList.remove(\"hidden\"); \r\n\t\t\t \t});\r\n\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tonEventClick = (div) =>{\r\n\t}\r\n\r\n\tgetEventObj = (div) => {\r\n\t\tconsole.log(div);\r\n\t\tconst selectedEvent = (this.state.events).filter(obj => obj.title === div.title);\r\n\t\tconsole.log('selected event:', selectedEvent);\r\n\t\treturn selectedEvent;\r\n\t\t// const eventSpan = document.createElement('span');\r\n\t\t// eve document.getElementById('singleEvent');\r\n\t\t// const h2 = eventSpan.children[0];\r\n\t\t// h2.textContent = div.title;\r\n\t\t// const img = eventSpan.children[1];\r\n\t\t// img.src = selectedEvent[0].img;\r\n\t\t// const a = eventSpan.children[2];\r\n\t\t// a.href = selectedEvent[0].ticketsUrl\r\n\t\t// a.href.textContent = \"Order tickets now!\";\r\n\t\t// div.appendChild(eventSpan);\r\n\t\t\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tif(this.props.city){\r\n\t\t\tthis.getEvents();\r\n\t\t}\r\n  \t}\r\n\r\n\trender(){\r\n\t\tconst {events, eventImg, eventLink} = this.state;\r\n\t\tif(this.props.isSignedIn){\r\n\t\t\treturn(\r\n\t\t\t\t<div style={{display:'flex', justifyContent:'center'}}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t    <Calendar\r\n\t\t\t\t\t      localizer={localizer}\r\n\t\t\t\t\t      events={events}\r\n\t\t\t\t\t      startAccessor=\"start\"\r\n\t\t\t\t\t      endAccessor=\"end\"\r\n\t\t\t\t\t      style={{height: 500}}\r\n\t\t\t\t\t    />\r\n\t\t\t\t  \t</div>\r\n\t\t\t\t  \t<div id='details'>\r\n\t\t\t\t\t\t<div id='eventDetails'>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div id='eventDetailsBlock'>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id='buttonDiv'>\r\n\t\t\t\t\t<button className='h3 ma4' onClick={this.SaveSearch}>Save This Search</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> \r\n\t\t\t);\r\n\t\t}else{\r\n\t\t\treturn(\r\n\t\t\t\t<div id='calendar' className='pa4'>\r\n\t\t\t\t\t<div className='pa3 ma2 shadow-5' style={{display:'flex', justifyContent:'center'}}>\r\n\t\t\t\t\t    <Calendar\r\n\t\t\t\t\t      localizer={localizer}\r\n\t\t\t\t\t      events={events}\r\n\t\t\t\t\t      startAccessor=\"start\"\r\n\t\t\t\t\t      endAccessor=\"end\"\r\n\t\t\t\t\t      style={{height: 500}}\r\n\t\t\t\t\t    />\r\n\t\t\t\t\t    <div id='details'>\r\n\t\t\t\t\t\t\t<div id='eventDetails'>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t  \t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\t\t\r\n}\r\n\r\nexport default CalendarTest;"]},"metadata":{},"sourceType":"module"}