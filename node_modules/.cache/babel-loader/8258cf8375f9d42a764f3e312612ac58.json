{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Gal\\\\Desktop\\\\Udemy\\\\event_finder_app\\\\src\\\\components\\\\SearchBar.js\";\nimport React from 'react';\nimport { CountryDropdown } from 'react-country-region-selector';\nimport { getCode } from 'country-list';\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getCountryCode = () => {\n      console.log('getCountryCode');\n      const countryName = this.state.country;\n      console.log('name:', countryName);\n      console.log('code:', getCode(countryName));\n      this.setState({\n        countryCode: getCode(countryName)\n      }, this.getCitiesOfCountry);\n    };\n\n    this.createCalendar = () => {\n      const city = this.state.city;\n      const countryCode = this.state.countryCode;\n      const calDiv = document.getElementById('calendar');\n\n      if (calDiv.childElementCount) {\n        let innerDiv = document.getElementById('innerCalendar');\n        innerDiv.remove();\n      }\n\n      const div = document.createElement('div');\n      div.id = 'innerCalendar';\n\n      function setAttributes(el, attrs) {\n        for (let key in attrs) {\n          el.setAttribute(key, attrs[key]);\n        }\n      }\n\n      setAttributes(div, {\n        'w-type': 'calendar',\n        'w-tmapikey': 'BTAzLLcXX3xXtooi8WdIktbOn1C3irib',\n        'w-theme': \"calendar\",\n        'w-colorscheme': \"light\",\n        'w-width': \"500\",\n        'w-height': \"640\",\n        'w-size': \"25\",\n        'w-border': \"1\",\n        'w-borderradius': \"4\",\n        'w-radius': \"25\",\n        'w-countrycode': countryCode,\n        'w-city': city,\n        'w-period': \"Thu Jan 09 2020 13:04:11 GMT+0200 (Israel Standard Time)\",\n        'w-periodweek': \"week\",\n        'w-layout': \"horizont\",\n        'w-proportion': \"standart\"\n      });\n      const script = document.createElement(\"script\");\n      script.async = true;\n      script.src = \"https://ticketmaster-api-staging.github.io/products-and-docs/widgets/calendar/1.0.0/lib/main-widget.js\";\n      calDiv.appendChild(div);\n      calDiv.appendChild(script);\n      this.setState({\n        calendarAdded: true\n      });\n    };\n\n    this.getCitiesOfCountry = () => {\n      console.log('code in get:', this.state.countryCode);\n      fetch('http://localhost:5000/cities', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          code: this.state.countryCode\n        })\n      }).then(res => res.json()).then(data => {\n        this.setState({\n          cityList: data\n        }, this.updateOptions);\n      });\n    };\n\n    this.updateOptions = () => {\n      const cities = this.state.cityList;\n      console.log('cities in dropdown:', cities);\n      const div = document.getElementById('cities');\n\n      if (div.childElementCount) {\n        let select = document.getElementById('citySelector');\n        select.remove();\n      }\n\n      const select = document.createElement('select');\n      select.id = 'citySelector';\n      select.className = 'pa4 ba br3 b--blue bg-lightest-blue ma2';\n      select.addEventListener(\"change\", () => {\n        this.selectCity(select.value);\n      });\n      div.appendChild(select);\n      cities.forEach(city => {\n        let op = document.createElement('option');\n        op.textContent = city;\n        op.value = city;\n        select.appendChild(op);\n      }, this.setState({\n        city: cities[0]\n      }));\n    };\n\n    this.state = {\n      country: '',\n      countryCode: '',\n      city: '',\n      cityList: [],\n      period: '',\n      calendarAdded: false\n    };\n  }\n\n  selectCountry(val) {\n    console.log('selectCountry');\n    this.setState({\n      country: val\n    }, this.getCountryCode);\n  }\n\n  selectCity(val) {\n    this.setState({\n      city: val\n    }, this.createCalendar);\n    console.log('in select city, val:', val); // fetch('http://localhost:5000/calendar', {\n    //      method: 'post',\n    //      headers: {'Content-Type': 'application/json'},\n    //      body: JSON.stringify({\n    //        code: this.state.countryCode,\n    //        city : val\n    //      })\n    //    })\n    //    .then(res => res.json())\n    //    .then(data => {\n    //    \tconsole.log(data);\n    //    })\n  }\n\n  componentDidMount() {\n    console.log('componentDidMount');\n  }\n\n  render() {\n    const country = this.state.country;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"pa5 shadow-5 bg-washed-blue\",\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(CountryDropdown, {\n      className: \"pa4 ba br3 b--blue bg-lightest-blue ma2\",\n      value: country,\n      onChange: val => this.selectCountry(val),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"cities\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      id: \"calendar\",\n      className: \"pa4\",\n      style: {\n        display: 'flex',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default SearchBar;","map":{"version":3,"sources":["C:/Users/Gal/Desktop/Udemy/event_finder_app/src/components/SearchBar.js"],"names":["React","CountryDropdown","getCode","SearchBar","Component","constructor","props","getCountryCode","console","log","countryName","state","country","setState","countryCode","getCitiesOfCountry","createCalendar","city","calDiv","document","getElementById","childElementCount","innerDiv","remove","div","createElement","id","setAttributes","el","attrs","key","setAttribute","script","async","src","appendChild","calendarAdded","fetch","method","headers","body","JSON","stringify","code","then","res","json","data","cityList","updateOptions","cities","select","className","addEventListener","selectCity","value","forEach","op","textContent","period","selectCountry","val","componentDidMount","render","display","justifyContent"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { CountryDropdown } from 'react-country-region-selector';\r\nimport { getCode } from 'country-list';\r\n\r\nclass SearchBar extends React.Component {\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tcountry : '',\r\n\t\t\tcountryCode : '',\r\n\t\t\tcity : '',\r\n\t\t\tcityList : [],\r\n\t\t\tperiod : '',\r\n\t\t\tcalendarAdded : false\r\n\t\t}\r\n\t}\r\n\r\n\tselectCountry (val) {\r\n\t\tconsole.log('selectCountry');\r\n\t    this.setState({ country: val },this.getCountryCode);\r\n\t}\r\n\r\n\tgetCountryCode = () => {\r\n\t\tconsole.log('getCountryCode');\r\n\t\tconst countryName = this.state.country;\r\n\t\tconsole.log('name:',countryName);\r\n\t\tconsole.log('code:', getCode(countryName));\r\n\t\tthis.setState({countryCode : getCode(countryName)}, this.getCitiesOfCountry);\r\n\t}\r\n\r\n\tselectCity (val) {\r\n\t    this.setState({ city: val }, this.createCalendar);\r\n\t    console.log('in select city, val:', val);\r\n\r\n\t\t// fetch('http://localhost:5000/calendar', {\r\n\t //      method: 'post',\r\n\t //      headers: {'Content-Type': 'application/json'},\r\n\t //      body: JSON.stringify({\r\n\t //        code: this.state.countryCode,\r\n\t //        city : val\r\n\t //      })\r\n\t //    })\r\n\t //    .then(res => res.json())\r\n\t //    .then(data => {\r\n\t //    \tconsole.log(data);\r\n\t //    })\r\n\t}\r\n\r\n\tcreateCalendar = () =>{\r\n\t\tconst city = this.state.city;\r\n\t\tconst countryCode = this.state.countryCode;\r\n\t\tconst calDiv = document.getElementById('calendar');\r\n\t\tif (calDiv.childElementCount){\r\n\t    \tlet innerDiv = document.getElementById('innerCalendar');\r\n\t    \tinnerDiv.remove();\r\n\t    }\r\n\t\tconst div = document.createElement('div');\r\n\t\tdiv.id='innerCalendar';\r\n\t\tfunction setAttributes(el, attrs) {\r\n\t\t  for(let key in attrs) {\r\n\t\t    el.setAttribute(key, attrs[key]);\r\n\t\t  }\r\n\t\t}\r\n\t\tsetAttributes(div, {'w-type': 'calendar', 'w-tmapikey':'BTAzLLcXX3xXtooi8WdIktbOn1C3irib',\r\n\t\t\t\t\t\t\t'w-theme':\"calendar\",'w-colorscheme':\"light\", 'w-width':\"500\", 'w-height':\"640\", \r\n\t\t\t\t\t\t\t'w-size':\"25\", 'w-border':\"1\", 'w-borderradius':\"4\", 'w-radius':\"25\", 'w-countrycode':countryCode, \r\n\t\t\t\t\t\t\t'w-city':city, 'w-period':\"Thu Jan 09 2020 13:04:11 GMT+0200 (Israel Standard Time)\",\r\n\t\t\t\t\t\t\t'w-periodweek':\"week\", 'w-layout':\"horizont\", 'w-proportion':\"standart\" });\r\n\t\tconst script = document.createElement(\"script\");\r\n\t    script.async = true;\r\n\t    script.src = \"https://ticketmaster-api-staging.github.io/products-and-docs/widgets/calendar/1.0.0/lib/main-widget.js\";\r\n\t\tcalDiv.appendChild(div);\r\n\t\tcalDiv.appendChild(script);\r\n\t\tthis.setState({calendarAdded : true});\r\n\r\n\t}\r\n\r\n\tgetCitiesOfCountry = () => {\r\n\t\tconsole.log('code in get:', this.state.countryCode);\r\n\t\tfetch('http://localhost:5000/cities', {\r\n\t      method: 'post',\r\n\t      headers: {'Content-Type': 'application/json'},\r\n\t      body: JSON.stringify({\r\n\t        code: this.state.countryCode\r\n\t      })\r\n\t    })\r\n\t    .then(res => res.json())\r\n\t    .then(data => {\r\n\t    \tthis.setState({cityList : data}, this.updateOptions);\r\n\t    })\r\n\t}\r\n\r\n\tupdateOptions = () => {\r\n\t\tconst cities = this.state.cityList;\r\n\t    console.log('cities in dropdown:', cities);\r\n\t    const div = document.getElementById('cities');\r\n\t    if (div.childElementCount){\r\n\t    \tlet select = document.getElementById('citySelector');\r\n\t    \tselect.remove();\r\n\t    }\r\n    \tconst select = document.createElement('select');\r\n    \tselect.id = 'citySelector';\r\n    \tselect.className = 'pa4 ba br3 b--blue bg-lightest-blue ma2';\r\n    \tselect.addEventListener(\"change\", () => {this.selectCity(select.value)});\r\n\t    div.appendChild(select);\r\n\t    cities.forEach(city => {\r\n\t    \tlet op = document.createElement('option');\r\n\t    \top.textContent = city;\r\n\t    \top.value = city;\r\n\t    \tselect.appendChild(op);\r\n\t    \t}, this.setState({city : cities[0]}))  \r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconsole.log('componentDidMount');\r\n\t    \r\n  \t}\r\n\r\n  \trender(){\r\n  \t\tconst {country} = this.state;\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className='pa5 shadow-5 bg-washed-blue' style={{display:'flex', justifyContent:'center'}}>\r\n\t\t\t\t\t<CountryDropdown\r\n\t\t\t\t\tclassName='pa4 ba br3 b--blue bg-lightest-blue ma2'\r\n\t\t\t          value={country}\r\n\t\t\t          onChange={(val) => this.selectCountry(val)}/>\r\n\t\t\t\t\t<div id='cities'>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div id='calendar' className='pa4' style={{display:'flex', justifyContent:'center'}}>\r\n\t\t\t    </div>\r\n\t\t    </div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SearchBar;"]},"metadata":{},"sourceType":"module"}